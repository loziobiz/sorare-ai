import{j as e,u as B,l as O,r as n}from"./main-DsfbD5fP.js";import{C as E,a as G,I as Q}from"./input-Dd4hXJFi.js";import{c as _,e as S,a as H,S as U,f as V,h as z,i as q,V as K,j as x,g as N,d as W}from"./checkbox-Mek54HdC.js";import{c as $,B as L,A as Y,b as J}from"./button-DJ2CAYQs.js";import{R as X,L as k,S as Z,P as ee}from"./sorare-api-D4coTWHb.js";import{T as se,u as te}from"./use-cards-De135H1m.js";const ae=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],le=$("log-out",ae),re={mobile:1,md:4,lg:5};function ie({cards:a,columns:s=re,showEmptyMessage:t=!0,emptyMessage:i,showCardPositions:r=!0,showCardAverages:c=!0}){if(a.length===0&&t)return e.jsx(E,{children:e.jsx(G,{className:"py-12 text-center text-muted-foreground",children:i??"No cards found"})});const d=(()=>{const l=["grid","grid-cols-1","gap-4"];return s.md===2?l.push("md:grid-cols-2"):s.md===3?l.push("md:grid-cols-3"):s.md===4?l.push("md:grid-cols-4"):s.md===5?l.push("md:grid-cols-5"):s.md===6&&l.push("md:grid-cols-6"),s.lg===2?l.push("lg:grid-cols-2"):s.lg===3?l.push("lg:grid-cols-3"):s.lg===4?l.push("lg:grid-cols-4"):s.lg===5?l.push("lg:grid-cols-5"):s.lg===6&&l.push("lg:grid-cols-6"),l.join(" ")})();return e.jsx("div",{className:d,children:a.map(l=>e.jsx(_,{card:l,showAverages:c,showPositions:r},l.slug))})}const C="flex h-9 rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring";function ne({rarity:a,position:s,league:t,sortBy:i,inSeasonOnly:r,sealed:c,searchQuery:h,leagues:d,onRarityChange:l,onPositionChange:m,onLeagueChange:g,onSortChange:u,onInSeasonChange:p,onSealedChange:f,onSearchQueryChange:v}){return e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx(oe,{onChange:l,value:a}),e.jsx(ce,{onChange:m,value:s}),e.jsx(de,{leagues:d,onChange:g,value:t}),e.jsx(he,{onChange:u,value:i}),e.jsx(ue,{onChange:f,value:c}),e.jsx(me,{checked:r,onChange:p}),e.jsx(xe,{onChange:v,value:h})]})}function oe({value:a,onChange:s}){return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"font-medium text-sm",htmlFor:"rarity-filter",children:"Rarità:"}),e.jsxs("select",{className:C,id:"rarity-filter",onChange:t=>s(t.target.value),value:a,children:[e.jsx("option",{value:"all",children:"Tutte"}),e.jsx("option",{value:"limited",children:"Limited"}),e.jsx("option",{value:"rare",children:"Rare"})]})]})}function ce({value:a,onChange:s}){return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"font-medium text-sm",htmlFor:"position-filter",children:"Ruolo:"}),e.jsxs("select",{className:C,id:"position-filter",onChange:t=>s(t.target.value),value:a,children:[e.jsx("option",{value:"all",children:"Tutti"}),e.jsx("option",{value:"Goalkeeper",children:S("Goalkeeper")}),e.jsx("option",{value:"Defender",children:S("Defender")}),e.jsx("option",{value:"Midfielder",children:S("Midfielder")}),e.jsx("option",{value:"Forward",children:S("Forward")})]})]})}function de({value:a,leagues:s,onChange:t}){return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"font-medium text-sm",htmlFor:"league-filter",children:"Lega:"}),e.jsxs("select",{className:C,id:"league-filter",onChange:i=>t(i.target.value),value:a,children:[e.jsx("option",{value:"all",children:"Tutte"}),s.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))]})]})}function he({value:a,onChange:s}){return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"font-medium text-sm",htmlFor:"sort-by",children:"Ordina per:"}),e.jsxs("select",{className:C,id:"sort-by",onChange:t=>s(t.target.value),value:a,children:[e.jsx("option",{value:"name",children:"Nome"}),e.jsx("option",{value:"team",children:"Squadra"}),e.jsx("option",{value:"l5",children:"Media L5"}),e.jsx("option",{value:"l15",children:"Media L15"}),e.jsx("option",{value:"l40",children:"Media L40"})]})]})}function me({checked:a,onChange:s}){return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{checked:a,id:"in-season-filter",onCheckedChange:t=>s(t===!0)}),e.jsx("label",{className:"cursor-pointer font-medium text-sm",htmlFor:"in-season-filter",children:"In-Season"})]})}function ue({value:a,onChange:s}){return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"font-medium text-sm",htmlFor:"sealed-filter",children:"Stato:"}),e.jsxs("select",{className:C,id:"sealed-filter",onChange:t=>s(t.target.value),value:a,children:[e.jsx("option",{value:"unsealed",children:"Libere"}),e.jsx("option",{value:"sealed",children:"Cassaforte"}),e.jsx("option",{value:"all",children:"Tutte"})]})]})}function xe({value:a,onChange:s}){return e.jsxs("div",{className:"relative min-w-[200px] flex-1",children:[e.jsx(U,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-slate-400"}),e.jsx(Q,{className:"h-9 pl-10",onChange:t=>s(t.target.value),placeholder:"Cerca giocatore o squadra...",value:a})]})}function ge({userSlug:a,lastUpdate:s,isLoading:t,isRefreshing:i,onRefresh:r,onClearCache:c}){const h=B(),d=async()=>{await O(),h.navigate({to:"/"})},l=i||t;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-3xl",children:"Sorare AI Dashboard"}),e.jsxs("p",{className:"text-muted-foreground",children:[a&&`Benvenuto, ${a}`,s&&e.jsxs("span",{className:"ml-2 text-sm",children:["· Updated ",V(s)]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(L,{disabled:l,onClick:r,variant:"outline",children:[e.jsx(X,{className:`mr-2 h-4 w-4 ${i?"animate-spin":""}`}),"Aggiorna carte"]}),e.jsxs(L,{disabled:l,onClick:c,variant:"outline",children:[e.jsx(se,{className:"mr-2 h-4 w-4"}),"Pulisci cache"]}),e.jsxs(L,{onClick:d,variant:"outline",children:[e.jsx(le,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]})}function fe(a){const[s,t]=n.useState("all"),[i,r]=n.useState("all"),[c,h]=n.useState("all"),[d,l]=n.useState("name"),[m,g]=n.useState(!1),[u,p]=n.useState("unsealed"),[f,v]=n.useState(""),o=n.useMemo(()=>({rarity:s,position:i,league:c,sortBy:d,inSeasonOnly:m,sealed:u,searchQuery:f}),[s,i,c,d,m,u,f]),b=n.useMemo(()=>z(a),[a]),y=n.useMemo(()=>q(a,o),[a,o]);return{filters:o,setRarity:t,setPosition:r,setLeague:h,setSortBy:l,setInSeasonOnly:g,setSealed:p,setSearchQuery:v,leagues:b,filteredCards:y}}function je(){const[a,s]=n.useState("list"),[t,i]=n.useState("name"),[r,c]=n.useState("asc"),{cards:h,userSlug:d,isLoading:l,isRefreshing:m,error:g,loadingProgress:u,lastUpdate:p,refresh:f,clearCache:v}=te(),{filters:o,setRarity:b,setPosition:y,setLeague:M,setSortBy:T,setInSeasonOnly:D,setSealed:A,setSearchQuery:F,leagues:I,filteredCards:w}=fe(h),j=(P,R)=>{i(P),c(R)};return l?e.jsx("div",{className:"space-y-6",children:e.jsx(k,{icon:"loader",message:u})}):m?e.jsx("div",{className:"space-y-6",children:e.jsx(k,{icon:"refresh",message:u})}):e.jsxs("div",{className:"flex h-[calc(100vh-2rem)] flex-col",children:[e.jsxs("div",{className:"sticky top-0 z-20 bg-white pb-2",children:[e.jsx(Z,{}),e.jsx("div",{className:"mt-6",children:e.jsx(ge,{isLoading:l,isRefreshing:m,lastUpdate:p,onClearCache:v,onRefresh:f,userSlug:d})}),e.jsx("div",{className:"mt-6",children:e.jsx(ne,{inSeasonOnly:o.inSeasonOnly,league:o.league,leagues:I,onInSeasonChange:D,onLeagueChange:M,onPositionChange:y,onRarityChange:b,onSealedChange:A,onSearchQueryChange:F,onSortChange:T,position:o.position,rarity:o.rarity,sealed:o.sealed,searchQuery:o.searchQuery,sortBy:o.sortBy})}),g&&e.jsx(Y,{className:"mt-4",variant:"destructive",children:e.jsx(J,{children:g})}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("h2",{className:"font-bold text-2xl",children:["Your Cards (",w.length,")"]}),e.jsx(K,{onViewModeChange:s,viewMode:a})]}),a==="list"&&e.jsx("div",{className:"mt-4 rounded-t-md border border-b-0 bg-white",children:e.jsx("table",{className:"w-full table-fixed text-sm",children:e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"h-10 cursor-pointer select-none whitespace-nowrap px-2 text-left align-middle font-medium text-foreground hover:bg-muted/80",onClick:()=>j("name",t==="name"&&r==="asc"?"desc":"asc"),style:{width:x.name},children:e.jsxs("div",{className:"flex items-center",children:["Giocatore",N("name",t,r)]})}),e.jsx("th",{className:"h-10 cursor-pointer select-none whitespace-nowrap px-2 text-left align-middle font-medium text-foreground hover:bg-muted/80",onClick:()=>j("team",t==="team"&&r==="asc"?"desc":"asc"),style:{width:x.team},children:e.jsxs("div",{className:"flex items-center",children:["Squadra",N("team",t,r)]})}),e.jsx("th",{className:"h-10 whitespace-nowrap px-2 text-left align-middle font-medium text-foreground",style:{width:x.forma},children:e.jsx("div",{className:"flex items-center",children:"Forma"})}),e.jsx("th",{className:"h-10 cursor-pointer select-none whitespace-nowrap px-2 text-left align-middle font-medium text-foreground hover:bg-muted/80",onClick:()=>j("l5",t==="l5"&&r==="asc"?"desc":"asc"),style:{width:x.l5},children:e.jsxs("div",{className:"flex items-center",children:["L5",N("l5",t,r)]})}),e.jsx("th",{className:"h-10 cursor-pointer select-none whitespace-nowrap px-2 text-left align-middle font-medium text-foreground hover:bg-muted/80",onClick:()=>j("l15",t==="l15"&&r==="asc"?"desc":"asc"),style:{width:x.l15},children:e.jsxs("div",{className:"flex items-center",children:["L15",N("l15",t,r)]})}),e.jsx("th",{className:"h-10 cursor-pointer select-none whitespace-nowrap px-2 text-left align-middle font-medium text-foreground hover:bg-muted/80",onClick:()=>j("l40",t==="l40"&&r==="asc"?"desc":"asc"),style:{width:x.l40},children:e.jsxs("div",{className:"flex items-center",children:["L40",N("l40",t,r)]})})]})})})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:a==="grid"?e.jsx(ie,{cards:w,columns:{lg:5,md:4,mobile:1},emptyMessage:"Nessuna carta trovata con i filtri selezionati",showCardAverages:!0,showCardPositions:!1}):e.jsx(W,{cards:w,columnWidths:x,emptyMessage:"Nessuna carta trovata con i filtri selezionati",onSort:j,showHeader:!1,sortDirection:r,sortKey:t})})]})}function ye(){return e.jsx(ee,{containerSize:"default",showNav:!0,children:e.jsx(je,{})})}export{ye as component};
