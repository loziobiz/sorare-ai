"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[75],{373:(e,t,a)=>{a.d(t,{UK:()=>n,b2:()=>r,jK:()=>i});let r=!0,i=!0,n={"Serie A|it":"Serie A","Premier League|gb-eng":"Premier League","Primera Divisi\xf3n|es":"La Liga","Bundesliga|de":"Bundesliga","Bundesliga|at":"Bundesliga Austria","Ligue 1|fr":"Ligue 1","First Division A|be":"Jupiler Pro League","MLS|us":"MLS","Eredivisie|nl":"Eredivisie","Liga Portugal|pt":"Liga Portugal"}},809:(e,t,a)=>{a.d(t,{HX:()=>s,db:()=>n,qX:()=>l});var r=a(3278);class i extends r.cf{constructor(){super("SorareDB"),this.version(2).stores({cachedCards:"slug, userSlug, timestamp, rarityFilter",cache:"key, timestamp",savedFormations:"++id, league, createdAt"})}}let n=new i,s={SHORT:3e5,MEDIUM:18e5,LONG:864e5,VERY_LONG:6048e5};async function l(){let e=Date.now(),t=[];await n.cache.toCollection().each(a=>{a.ttl&&e-a.timestamp>a.ttl&&t.push(a.key)}),t.length>0&&await n.cache.bulkDelete(t)}},1650:(e,t,a)=>{a.d(t,{k:()=>l});var r=a(5155),i=a(5299),n=a(9559);let s={loader:i.A,refresh:n.A};function l(e){let{icon:t="loader",message:a}=e,i=s[t];return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 py-12",children:[(0,r.jsx)(i,{className:"h-8 w-8 animate-spin text-muted-foreground"}),a&&(0,r.jsx)("p",{className:"text-muted-foreground text-sm",children:a})]})}},2559:(e,t,a)=>{a.d(t,{Fc:()=>l,T2:()=>o,TN:()=>d,XL:()=>c});var r=a(5155),i=a(3101),n=a(5016);let s=(0,i.F)("relative grid w-full grid-cols-[0_1fr] items-start gap-y-0.5 rounded-lg border px-4 py-3 text-sm has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] has-[>svg]:gap-x-3 [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"bg-card text-destructive *:data-[slot=alert-description]:text-destructive/90 [&>svg]:text-current"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:a,...i}=e;return(0,r.jsx)("div",{className:(0,n.cn)(s({variant:a}),t),"data-slot":"alert",role:"alert",...i})}function c(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),"data-slot":"alert-title",...a})}function d(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)("col-start-2 grid justify-items-start gap-1 text-muted-foreground text-sm [&_p]:leading-relaxed",t),"data-slot":"alert-description",...a})}function o(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)("col-start-2 col-end-[-1] mt-4",t),"data-slot":"alert-action",...a})}},3209:(e,t,a)=>{a.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>n,aR:()=>s});var r=a(5155),i=a(5016);function n(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col gap-6 rounded-xl border bg-card py-6 text-card-foreground shadow-sm",t),"data-slot":"card",...a})}function s(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),"data-slot":"card-header",...a})}function l(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("font-semibold leading-none",t),"data-slot":"card-title",...a})}function c(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("text-muted-foreground text-sm",t),"data-slot":"card-description",...a})}function d(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("px-6",t),"data-slot":"card-content",...a})}},4916:(e,t,a)=>{a.d(t,{S:()=>c});var r=a(5155),i=a(4069),n=a(5917),s=a(2115),l=a(5016);let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.bL,{className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),ref:t,...s,children:(0,r.jsx)(i.C1,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})})});c.displayName=i.bL.displayName},5016:(e,t,a)=>{a.d(t,{cn:()=>n});var r=a(2821),i=a(5889);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.QP)((0,r.$)(t))}},7003:(e,t,a)=>{a.d(t,{$:()=>c});var r=a(5155),i=a(2467),n=a(3101),s=a(5016);let l=(0,n.F)("inline-flex shrink-0 items-center justify-center gap-2 whitespace-nowrap rounded-md font-medium text-sm outline-none transition-all focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:pointer-events-none disabled:opacity-50 aria-invalid:border-destructive aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:bg-destructive/60 dark:focus-visible:ring-destructive/40",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:border-input dark:bg-input/30 dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 gap-1.5 rounded-md px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:a="default",size:n="default",asChild:c=!1,...d}=e,o=c?i.DX:"button";return(0,r.jsx)(o,{className:(0,s.cn)(l({variant:a,size:n,className:t})),"data-size":n,"data-slot":"button","data-variant":a,...d})}},8070:(e,t,a)=>{a.d(t,{KX:()=>n});var r=a(2115),i=a(809);function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36e5,[t,a]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let t=async()=>{await (0,i.qX)(),a(!0)};t();let r=setInterval(t,e);return()=>clearInterval(r)},[e]),t}},8271:(e,t,a)=>{a.d(t,{x:()=>u});var r=a(5155),i=a(8519),n=a(9397),s=a(6046),l=a(2619),c=a.n(l),d=a(63);let o=[{href:"/cards",label:"Le mie Carte",icon:i.A},{href:"/lineup",label:"Crea Formazione",icon:n.A},{href:"/saved-lineups",label:"Formazioni Salvate",icon:s.A}];function u(){let e=(0,d.usePathname)();return(0,r.jsx)("nav",{className:"mb-6 flex items-center gap-2 border-slate-200 border-b pb-4",children:o.map(t=>{let a=e===t.href,i=t.icon;return(0,r.jsxs)(c(),{className:"flex items-center gap-2 rounded-lg px-4 py-2 font-medium text-sm transition-colors ".concat(a?"bg-violet-100 text-violet-700":"text-slate-600 hover:bg-slate-100 hover:text-slate-900","\n            "),href:t.href,children:[(0,r.jsx)(i,{className:"h-4 w-4"}),t.label]},t.href)})})}},8759:(e,t,a)=>{a.d(t,{mL:()=>o,T7:()=>d});var r=a(809);class i{async init(){if(!this.cache)try{this.cache=await caches.open("sorare-graphql-cache")}catch(e){console.warn("Cache API not available")}}generateKey(e){let t=JSON.stringify({query:e.query,variables:e.variables});return"/graphql/".concat(btoa(t))}isExpired(e){return!!e.ttl&&Date.now()-e.timestamp>e.ttl}async get(e){if(await this.init(),!this.cache)return null;try{let t=this.generateKey(e),a=await this.cache.match(t);if(!a)return null;let r=await a.json();if(this.isExpired(r))return await this.cache.delete(t),null;return r.data}catch(e){return null}}async set(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:864e5;if(await this.init(),this.cache)try{let r=this.generateKey(e),i={data:t,timestamp:Date.now(),ttl:a},n=Response.json(i);await this.cache.put(r,n)}catch(e){}}async invalidate(e){if(await this.init(),this.cache)if(e){var t;let a=this.generateKey(e);await (null==(t=this.cache)?void 0:t.delete(a))}else{let e=await this.cache.keys();await Promise.all(e.map(e=>{var t;return null==(t=this.cache)?void 0:t.delete(e)}))}}async clear(){if(await this.init(),!this.cache)return;let e=await this.cache.keys();await Promise.all(e.map(async e=>{this.cache&&await this.cache.delete(e)}))}async getSize(){return(await this.init(),this.cache)?(await this.cache.keys()).length:0}constructor(){this.cache=null}}let n=new i;async function s(e,t,a){let r=await n.get(e);if(r)return r;let i=await t();return await n.set(e,i,a),i}let l="\n  query GetCards($after: String) {\n    currentUser {\n      slug\n      cards(first: 100, after: $after, rarities: [limited, rare]) {\n        nodes {\n          slug\n          name\n          rarityTyped\n          anyPositions\n          pictureUrl\n          inSeasonEligible\n          cardPrice\n          lowestPriceCard {\n            slug\n            cardPrice\n          }\n          latestPrimaryOffer {\n            price {\n              eurCents\n              usdCents\n              referenceCurrency\n            }\n            status\n          }\n          anyPlayer {\n            activeClub {\n              name\n              pictureUrl\n              activeCompetitions {\n                name\n                displayName\n                format\n                country {\n                  code\n                  name\n                }\n              }\n            }\n          }\n          l5Average: averageScore(type: LAST_FIVE_SO5_AVERAGE_SCORE)\n          l10Average: averageScore(type: LAST_TEN_PLAYED_SO5_AVERAGE_SCORE)\n          l15Average: averageScore(type: LAST_FIFTEEN_SO5_AVERAGE_SCORE)\n          l40Average: averageScore(type: LAST_FORTY_SO5_AVERAGE_SCORE)\n        }\n        pageInfo {\n          hasNextPage\n          endCursor\n        }\n      }\n    }\n  }\n";async function c(){let{cursor:e,signal:t,useCache:a=!0,cacheTtl:r=18e5}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=async()=>{var a,r,i;let n=await fetch("/api/graphql",{body:JSON.stringify({query:l,variables:{after:e}}),headers:{"Content-Type":"application/json"},method:"POST",signal:t});if(429===n.status){let a=n.headers.get("Retry-After"),r=a?1e3*Number.parseInt(a,10):2e3;return await new Promise(e=>setTimeout(e,r)),c({cursor:e,signal:t,useCache:!1})}let s=await n.json();if(s.errors)throw Error(s.errors.map(e=>e.message).join(", "));if(!(null==(a=s.data)?void 0:a.currentUser))return{cards:[],cursor:null};let d=((null==(r=s.data.currentUser.cards)?void 0:r.nodes)||[]).filter(e=>{var t,a;return((null==(a=e.anyPlayer)||null==(t=a.activeClub)?void 0:t.activeCompetitions)||[]).some(e=>"DOMESTIC_LEAGUE"===e.format)}),o=null==(i=s.data.currentUser.cards)?void 0:i.pageInfo;return{cards:d,cursor:(null==o?void 0:o.hasNextPage)?null==o?void 0:o.endCursor:null,userSlug:s.data.currentUser.slug}};return a?await s({query:l,variables:{after:e}},i,r):await i()}async function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{onProgress:t,enablePagination:a=!0,pageDelay:r=1100,signal:i,cacheTtl:n=18e5}=e,s=[],l=null,d=0,o="",u=e=>new Promise(t=>setTimeout(t,e));do{d++;let e=await c({cacheTtl:n,cursor:l,signal:i,useCache:1===d});if(s.push(...e.cards),e.userSlug&&(o=e.userSlug),null==t||t(d,s.length),(l=e.cursor)&&!a)break;l&&await u(r)}while(l);return{cards:s,userSlug:o}}async function o(){if(await n.clear(),await r.db.cache.clear(),await r.db.cachedCards.clear(),"undefined"!=typeof caches){let e=await caches.keys();await Promise.all(e.map(e=>caches.delete(e)))}}},9220:(e,t,a)=>{a.d(t,{H:()=>l});var r=a(5155),i=a(5239),n=a(3209);function s(e){let{src:t,alt:a}=e;return(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(i.default,{alt:a,blurDataURL:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZTBlMGUwIi8+PC9zdmc+",className:"h-auto max-w-[200px] rounded-lg",height:200,loading:"lazy",placeholder:"blur",src:t,unoptimized:!0,width:200})})}function l(e){var t,a,i,l,c,d,o,u,h;let{card:v,showPositions:g=!0,showAverages:m=!0}=e;return(0,r.jsx)(n.Zp,{children:(0,r.jsxs)(n.Wu,{className:"space-y-3",children:[v.pictureUrl&&(0,r.jsx)(s,{alt:v.name,src:v.pictureUrl}),g&&v.anyPositions&&v.anyPositions.length>0&&(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-medium",children:"Position:"})," ",v.anyPositions.join(", ")]}),m&&(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-2 text-center text-xs",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-muted-foreground",children:"L5"}),(0,r.jsx)("div",{className:"font-medium",children:null!=(d=null==(t=v.l5Average)?void 0:t.toFixed(1))?d:"-"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-muted-foreground",children:"L10"}),(0,r.jsx)("div",{className:"font-medium",children:null!=(o=null==(a=v.l10Average)?void 0:a.toFixed(1))?o:"-"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-muted-foreground",children:"L15"}),(0,r.jsx)("div",{className:"font-medium",children:null!=(u=null==(i=v.l15Average)?void 0:i.toFixed(1))?u:"-"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-muted-foreground",children:"L40"}),(0,r.jsx)("div",{className:"font-medium",children:null!=(h=null==(l=v.l40Average)?void 0:l.toFixed(1))?h:"-"})]})]}),(null==(c=v.anyPlayer)?void 0:c.activeClub)&&(0,r.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,r.jsx)("div",{className:"font-medium",children:v.anyPlayer.activeClub.name}),v.anyPlayer.activeClub.activeCompetitions&&v.anyPlayer.activeClub.activeCompetitions.length>0&&(0,r.jsx)("div",{className:"text-muted-foreground",children:(()=>{var e,t;let a=v.anyPlayer.activeClub.activeCompetitions.find(e=>"DOMESTIC_LEAGUE"===e.format);return null!=(t=null==a?void 0:a.name)?t:null==(e=v.anyPlayer.activeClub.activeCompetitions[0])?void 0:e.name})()})]})]})})}}}]);