(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[667],{373:(e,t,a)=>{"use strict";a.d(t,{UK:()=>i,b2:()=>s,jK:()=>r});let s=!0,r=!0,i={"Serie A|it":"Serie A","Premier League|gb-eng":"Premier League","Primera Divisi\xf3n|es":"La Liga","Bundesliga|de":"Bundesliga","Bundesliga|at":"Bundesliga Austria","Ligue 1|fr":"Ligue 1","First Division A|be":"Jupiler Pro League","MLS|us":"MLS","Eredivisie|nl":"Eredivisie","Liga Portugal|pt":"Liga Portugal"}},809:(e,t,a)=>{"use strict";a.d(t,{HX:()=>l,db:()=>i,qX:()=>n});var s=a(3278);class r extends s.cf{constructor(){super("SorareDB"),this.version(2).stores({cachedCards:"slug, userSlug, timestamp, rarityFilter",cache:"key, timestamp",savedFormations:"++id, league, createdAt"})}}let i=new r,l={SHORT:3e5,MEDIUM:18e5,LONG:864e5,VERY_LONG:6048e5};async function n(){let e=Date.now(),t=[];await i.cache.toCollection().each(a=>{a.ttl&&e-a.timestamp>a.ttl&&t.push(a.key)}),t.length>0&&await i.cache.bulkDelete(t)}},1360:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},1650:(e,t,a)=>{"use strict";a.d(t,{k:()=>n});var s=a(5155),r=a(5299),i=a(9559);let l={loader:r.A,refresh:i.A};function n(e){let{icon:t="loader",message:a}=e,r=l[t];return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 py-12",children:[(0,s.jsx)(r,{className:"h-8 w-8 animate-spin text-muted-foreground"}),a&&(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:a})]})}},2389:(e,t,a)=>{"use strict";a.d(t,{SavedLineups:()=>f});var s=a(5155);let r=(0,a(1847).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var i=a(1360),l=a(5239),n=a(63),c=a(2115),d=a(1650),o=a(8271),u=a(2559),m=a(7003),x=a(373),v=a(809);function h(e){var t,a,r,i,n,c;let{card:d}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[d.pictureUrl&&(0,s.jsx)(l.default,{alt:d.name,className:"h-auto max-w-[95px] rounded-lg",height:100,src:d.pictureUrl,unoptimized:!0,width:85}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-1 text-center text-[10px]",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-muted-foreground",children:"L5"}),(0,s.jsx)("div",{className:"font-medium",children:null!=(i=null==(t=d.l5Average)?void 0:t.toFixed(1))?i:"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-muted-foreground",children:"L15"}),(0,s.jsx)("div",{className:"font-medium",children:null!=(n=null==(a=d.l15Average)?void 0:a.toFixed(1))?n:"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-muted-foreground",children:"L40"}),(0,s.jsx)("div",{className:"font-medium",children:null!=(c=null==(r=d.l40Average)?void 0:r.toFixed(1))?c:"-"})]})]})]})}function g(e){let{formation:t,onEdit:a,onDelete:l}=e,[n,d]=(0,c.useState)("");return(0,c.useEffect)(()=>{let[e,a]=t.league.split("|"),s=x.UK[t.league];d(null!=s?s:"".concat(e," (").concat(a,")"))},[t.league]),(0,s.jsxs)("div",{className:"space-y-4 rounded-lg border border-slate-200 bg-white p-4 shadow-sm",style:{maxWidth:"480px"},children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsx)("div",{children:(0,s.jsx)("h3",{className:"font-bold text-slate-800 text-xl",children:t.name})})}),(0,s.jsx)("div",{className:"flex gap-1 overflow-x-auto pb-2",children:t.cards.map(e=>(0,s.jsx)(h,{card:e},e.slug))}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(m.$,{className:"h-8 flex-1 px-2 text-xs",onClick:()=>a(t),variant:"outline",children:[(0,s.jsx)(r,{className:"mr-1 h-3 w-3"}),"Modifica"]}),(0,s.jsxs)(m.$,{className:"h-8 flex-1 px-2 text-xs",onClick:()=>l(t.id),variant:"destructive",children:[(0,s.jsx)(i.A,{className:"mr-1 h-3 w-3"}),"Cancella"]})]})]})}function f(){let e=(0,n.useRouter)(),[t,a]=(0,c.useState)(!0),[r,i]=(0,c.useState)([]),[l,h]=(0,c.useState)(null),f=(0,c.useCallback)(async()=>{try{let e=(await v.db.savedFormations.toArray()).sort((e,t)=>e.league!==t.league?e.league.localeCompare(t.league):t.createdAt-e.createdAt);i(e)}catch(e){console.error("Error loading formations:",e)}finally{a(!1)}},[]);(0,c.useEffect)(()=>{f()},[f]);let p=t=>{e.push("/lineup?edit=".concat(t.id))},j=e=>{h(e)},b=async()=>{if(null!==l)try{await v.db.savedFormations.delete(l),i(e=>e.filter(e=>e.id!==l)),h(null)}catch(e){console.error("Error deleting formation:",e)}},N=(0,c.useMemo)(()=>{let e={};for(let t of r){let[a,s]=t.league.split("|"),r=x.UK[t.league],i=null!=r?r:"".concat(a," (").concat(s,")");e[i]||(e[i]=[]),e[i].push(t)}return e},[r]);return t?(0,s.jsx)("div",{className:"flex h-[80vh] items-center justify-center",children:(0,s.jsx)(d.k,{icon:"loader",message:"Caricamento formazioni..."})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(o.x,{}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"font-bold text-3xl",children:"Formazioni Salvate"}),(0,s.jsxs)("p",{className:"text-muted-foreground",children:[r.length," ",1===r.length?"formazione":"formazioni"]})]}),0===r.length?(0,s.jsxs)("div",{className:"py-12 text-center text-slate-500",children:[(0,s.jsx)("p",{children:"Nessuna formazione salvata."}),(0,s.jsx)(m.$,{className:"mt-4",onClick:()=>e.push("/lineup"),children:"Crea una nuova formazione"})]}):(0,s.jsx)("div",{className:"space-y-8",children:Object.entries(N).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"mb-4 font-bold text-slate-700 text-xl",children:t}),(0,s.jsx)("div",{className:"grid gap-2 lg:grid-cols-3",children:a.map(e=>(0,s.jsx)(g,{formation:e,onDelete:j,onEdit:p},e.id))})]},t)})}),null!==l&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,s.jsxs)(u.Fc,{className:"max-w-md",variant:"destructive",children:[(0,s.jsx)(u.XL,{children:"Conferma cancellazione"}),(0,s.jsx)(u.TN,{children:"Sei sicuro di voler cancellare questa formazione? Questa azione non pu\xf2 essere annullata."}),(0,s.jsxs)(u.T2,{className:"mt-4 flex gap-2",children:[(0,s.jsx)(m.$,{onClick:()=>h(null),variant:"outline",children:"Annulla"}),(0,s.jsx)(m.$,{onClick:b,variant:"destructive",children:"Conferma cancellazione"})]})]})})]})}},2559:(e,t,a)=>{"use strict";a.d(t,{Fc:()=>n,T2:()=>o,TN:()=>d,XL:()=>c});var s=a(5155),r=a(3101),i=a(5016);let l=(0,r.F)("relative grid w-full grid-cols-[0_1fr] items-start gap-y-0.5 rounded-lg border px-4 py-3 text-sm has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] has-[>svg]:gap-x-3 [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"bg-card text-destructive *:data-[slot=alert-description]:text-destructive/90 [&>svg]:text-current"}},defaultVariants:{variant:"default"}});function n(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:(0,i.cn)(l({variant:a}),t),"data-slot":"alert",role:"alert",...r})}function c(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),"data-slot":"alert-title",...a})}function d(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("col-start-2 grid justify-items-start gap-1 text-muted-foreground text-sm [&_p]:leading-relaxed",t),"data-slot":"alert-description",...a})}function o(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("col-start-2 col-end-[-1] mt-4",t),"data-slot":"alert-action",...a})}},4649:(e,t,a)=>{Promise.resolve().then(a.bind(a,2389))},5016:(e,t,a)=>{"use strict";a.d(t,{cn:()=>i});var s=a(2821),r=a(5889);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},7003:(e,t,a)=>{"use strict";a.d(t,{$:()=>c});var s=a(5155),r=a(2467),i=a(3101),l=a(5016);let n=(0,i.F)("inline-flex shrink-0 items-center justify-center gap-2 whitespace-nowrap rounded-md font-medium text-sm outline-none transition-all focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:pointer-events-none disabled:opacity-50 aria-invalid:border-destructive aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:bg-destructive/60 dark:focus-visible:ring-destructive/40",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:border-input dark:bg-input/30 dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 gap-1.5 rounded-md px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:a="default",size:i="default",asChild:c=!1,...d}=e,o=c?r.DX:"button";return(0,s.jsx)(o,{className:(0,l.cn)(n({variant:a,size:i,className:t})),"data-size":i,"data-slot":"button","data-variant":a,...d})}},8271:(e,t,a)=>{"use strict";a.d(t,{x:()=>u});var s=a(5155),r=a(8519),i=a(9397),l=a(6046),n=a(2619),c=a.n(n),d=a(63);let o=[{href:"/cards",label:"Le mie Carte",icon:r.A},{href:"/lineup",label:"Crea Formazione",icon:i.A},{href:"/saved-lineups",label:"Formazioni Salvate",icon:l.A}];function u(){let e=(0,d.usePathname)();return(0,s.jsx)("nav",{className:"mb-6 flex items-center gap-2 border-slate-200 border-b pb-4",children:o.map(t=>{let a=e===t.href,r=t.icon;return(0,s.jsxs)(c(),{className:"flex items-center gap-2 rounded-lg px-4 py-2 font-medium text-sm transition-colors ".concat(a?"bg-violet-100 text-violet-700":"text-slate-600 hover:bg-slate-100 hover:text-slate-900","\n            "),href:t.href,children:[(0,s.jsx)(r,{className:"h-4 w-4"}),t.label]},t.href)})})}}},e=>{e.O(0,[608,499,441,255,358],()=>e(e.s=4649)),_N_E=e.O()}]);